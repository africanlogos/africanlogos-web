<template>
  <section class="bg-secondary left-0 fixed pt-28 w-[272px] flex-shrink-0 z-10">
    <div>
      <span
        @click="activeSection = 0"
        :class="activeSection === 0 ? 'active text-white' : ' text-primary'"
        class="flex px-5 py-[8px] cursor-pointer items-center"
      >
        <svg
          width="20"
          height="20"
          class="mr-3"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 0C5.95312 0 1 4.95312 1 11V16H3V11C3 6.04688 7.04688 2 12 2C16.9531 2 21 6.04688 21 11V16H23V11C23 4.95312 18.0469 0 12 0ZM12 4C8.15625 4 5 7.15625 5 11V16H7V11C7 8.24609 9.24609 6 12 6C14.7539 6 17 8.24609 17 11V16H19V11C19 7.15625 15.8438 4 12 4ZM12 8C10.3555 8 9 9.35547 9 11V16H11V11C11 10.4453 11.4453 10 12 10C12.5547 10 13 10.4453 13 11V16H15V11C15 9.35547 13.6445 8 12 8ZM1 17L0 21H24L23 17H1ZM0 22V24H24V22H0Z"
            fill="#3D6F35"
          />
        </svg>
        Recently added
      </span>

      <span
        @click="activeSection = 3"
        :class="activeSection === 3 ? 'active text-white' : ' text-primary'"
        class="flex px-5 py-[8px] cursor-pointer items-center"
      >
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          class="mr-3"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9.22251 0.55901C9.15078 0.486365 9.03564 0.480005 8.95635 0.544308L5.7024 3.18318C5.65594 3.22085 5.62896 3.27747 5.62896 3.33728V5.60282L4.36654 5.00403C4.35318 4.99752 4.33899 4.99247 4.32416 4.98908C4.29527 4.98245 4.26537 4.98241 4.23669 4.98879C4.21873 4.99276 4.20168 4.99917 4.18591 5.00766C4.17941 5.01115 4.17307 5.01502 4.16691 5.01928L2.30185 6.30899C2.24827 6.34604 2.21629 6.40704 2.21629 6.47218V14.4682H0.986075C0.878908 14.4682 0.791107 14.5533 0.78776 14.6604L0.767919 15.2954C0.766242 15.3491 0.78639 15.4011 0.823762 15.4397C0.861133 15.4782 0.912537 15.5 0.966234 15.5H15.0336C15.1432 15.5 15.232 15.4112 15.232 15.3016V14.6666C15.232 14.557 15.1432 14.4682 15.0336 14.4682H13.7837V6.90859C13.7837 6.83427 13.7421 6.76619 13.676 6.73218L12.3269 6.03774C12.2639 6.00533 12.1885 6.00893 12.1289 6.04719L10.8273 6.8828V2.26584C10.8273 2.21366 10.8068 2.16357 10.7701 2.12644L9.22251 0.55901ZM2.4147 14.865L2.41532 14.865H4.27852L4.27976 14.865L4.28101 14.865H8.54153L8.54561 14.865L8.54968 14.865H10.6283L10.6289 14.865L10.6295 14.865H12.235L12.2361 14.865L12.2371 14.865H14.8352V15.1032H1.17094L1.17838 14.865H2.41408L2.4147 14.865ZM5.62896 14.4682H4.47818V5.49618L5.62896 6.04202V14.4682ZM10.4305 14.4682H8.74402V1.22741L9.06655 0.96585L10.4305 2.34729V7.24511L10.4305 7.24599V14.4682ZM12.0376 14.4682H10.8273V7.35437L12.0376 6.57733V14.4682Z"
            fill="#3D6F35"
          />
        </svg>

        Companies
      </span>

      <span
        @click="activeSection = 1"
        :class="activeSection === 1 ? 'active text-white' : ' text-primary'"
        class="flex px-5 py-[8px] cursor-pointer items-center"
      >
        <svg
          class="mr-3"
          width="15"
          height="16"
          viewBox="0 0 15 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.59916 2.86836H11.1781C11.5969 2.86836 11.9985 3.03473 12.2945 3.33079C12.5906 3.62698 12.757 4.02847 12.757 4.44726V10.8971C13.284 11.0833 13.7281 11.4498 14.0109 11.9319C14.2937 12.4138 14.3971 12.9804 14.3025 13.5314C14.2081 14.0822 13.9219 14.5819 13.4946 14.9421C13.0674 15.3023 12.5264 15.5 11.9675 15.5C11.4086 15.5 10.8678 15.3023 10.4404 14.9421C10.0131 14.5819 9.72693 14.0822 9.6325 13.5314C9.53807 12.9804 9.64131 12.4138 9.92414 11.9319C10.207 11.4498 10.6512 11.0833 11.178 10.8971V4.44726H9.59914V6.81562L6.04661 3.65781L9.59914 0.5L9.59916 2.86836ZM1.70464 5.89196C1.17774 5.70576 0.733538 5.33923 0.450726 4.85714C0.1679 4.37519 0.0646469 3.80863 0.159088 3.25767C0.25351 2.70686 0.539716 2.20713 0.967035 1.84692C1.39435 1.4867 1.9352 1.28904 2.4941 1.28904C3.05299 1.28904 3.59399 1.48669 4.02116 1.84692C4.44848 2.20713 4.73468 2.70686 4.82911 3.25767C4.92368 3.80863 4.8203 4.37519 4.53747 4.85714C4.25464 5.33923 3.81057 5.70576 3.28356 5.89196V10.8971C3.81061 11.0833 4.25466 11.4498 4.53747 11.9319C4.8203 12.4138 4.92366 12.9804 4.82911 13.5314C4.73469 14.0822 4.44848 14.5819 4.02116 14.9421C3.59399 15.3023 3.05299 15.5 2.4941 15.5C1.9352 15.5 1.39435 15.3023 0.967035 14.9421C0.539716 14.5819 0.253521 14.0822 0.159088 13.5314C0.0646657 12.9804 0.167898 12.4138 0.450726 11.9319C0.733553 11.4498 1.17777 11.0833 1.70464 10.8971V5.89196ZM2.49409 4.44726C2.7035 4.44726 2.90423 4.36415 3.05242 4.21598C3.20044 4.06795 3.28356 3.86722 3.28356 3.6578C3.28356 3.44838 3.20044 3.24766 3.05242 3.09962C2.90425 2.95145 2.70351 2.86833 2.49409 2.86833C2.28469 2.86833 2.08395 2.95145 1.93591 3.09962C1.78789 3.24764 1.70463 3.44838 1.70463 3.6578C1.70463 3.86722 1.78789 4.06794 1.93591 4.21598C2.08393 4.36415 2.28467 4.44726 2.49409 4.44726ZM2.49409 13.9207C2.7035 13.9207 2.90423 13.8376 3.05242 13.6894C3.20044 13.5414 3.28356 13.3406 3.28356 13.1312C3.28356 12.9218 3.20044 12.7211 3.05242 12.573C2.90425 12.4249 2.70351 12.3418 2.49409 12.3418C2.28469 12.3418 2.08395 12.4249 1.93591 12.573C1.78789 12.7211 1.70463 12.9218 1.70463 13.1312C1.70463 13.3406 1.78789 13.5414 1.93591 13.6894C2.08393 13.8376 2.28467 13.9207 2.49409 13.9207ZM11.9675 13.9207C12.1769 13.9207 12.3777 13.8376 12.5258 13.6894C12.6739 13.5414 12.757 13.3406 12.757 13.1312C12.757 12.9218 12.6739 12.7211 12.5258 12.573C12.3777 12.4249 12.1769 12.3418 11.9675 12.3418C11.7581 12.3418 11.5574 12.4249 11.4093 12.573C11.2613 12.7211 11.1781 12.9218 11.1781 13.1312C11.1781 13.3406 11.2613 13.5414 11.4093 13.6894C11.5574 13.8376 11.7581 13.9207 11.9675 13.9207Z"
            fill="#3D6F35"
          />
        </svg>

        Contributors
      </span>

      <span
        @click="activeSection = 2"
        :class="activeSection === 2 ? 'active text-white' : ' text-primary'"
        class="flex px-5 py-[8px] cursor-pointer items-center"
      >
        <svg
          width="20"
          class="mr-3"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M14.8214 2.50163H5.17854C5.09104 2.50163 4.99453 2.52966 4.91823 2.57013C4.84174 2.61619 4.75841 2.68878 4.71465 2.76833L2.57175 6.51844C2.52309 6.60388 2.50295 6.70558 2.5 6.80341C2.5029 6.85004 2.51089 6.89767 2.52298 6.94276C2.54025 6.994 2.56433 7.04149 2.59159 7.08794L9.55485 17.2632C9.62637 17.3615 9.72715 17.436 9.84307 17.4732C9.96167 17.5141 10.0848 17.5028 10.1993 17.4566C10.2993 17.4173 10.3813 17.3496 10.4442 17.2632L17.4063 7.08938C17.4586 7.00017 17.4911 6.90709 17.5 6.80328C17.5004 6.70668 17.4757 6.62572 17.4384 6.53772C16.7915 5.24384 16.1699 3.80492 15.2292 2.69389C15.1232 2.56331 14.9804 2.52291 14.8214 2.50163ZM11.982 7.32314H8.01784L9.99992 14.8612L11.982 7.32314ZM11.6376 6.25166L9.99997 3.95932L8.36246 6.25166H11.6376ZM6.10161 3.57311L7.37177 5.79528L8.95906 3.57311H6.10161ZM13.8984 3.57311H11.0409L12.6282 5.79528L13.8984 3.57311ZM16.0407 6.25166L14.8215 4.11682L13.6016 6.25166H16.0407ZM6.39841 6.25166L5.17859 4.11682L3.95934 6.25166H6.39841ZM8.69442 14.109L6.90837 7.32308H4.0535L8.69442 14.109ZM13.0915 7.32308L11.3054 14.109L15.9463 7.32308H13.0915Z"
            fill="#3D6F35"
          />
        </svg>

        Premium
      </span>
    </div>
    <div>
      <h4 class="px-5 py-[10px] text-[#A6A296]">Categories</h4>

      <div class="overflow-scroll h-screen">
        <div
          :class="
            activeCategories === -1 ? 'active text-white' : 'text-primary'
          "
          @click="getCategories({ name: '' }, -1)"
          class="flex justify-between px-5 py-[8px] cursor-pointer category"
        >
          <span class=""> All </span>
          <span class=""> {{ total }} </span>
        </div>

        <div
          :class="
            activeCategories === index ? 'active text-white' : 'text-primary'
          "
          @click="getCategories(cat, index)"
          class="flex justify-between px-5 py-[8px] cursor-pointer category"
          v-for="(cat, index) in categories"
          :key="index"
        >
          <span class="">
            {{ cat.name }}
          </span>
          <span class=""> {{ cat.count }} </span>
        </div>
      </div>
    </div>
  </section>
</template>

<script>
export default {
  props: {
    categories: {
      type: Array,
      default: [],
    },
  },
  data() {
    return {
      activeCategories: -1,
      activeSection: -1,
    };
  },

  methods: {
    getCategories(categorie, index) {
      this.activeCategories = index;
      console.log(categorie);
      this.$emit("filter-by-category", categorie);
      // this.$store.dispatch('getCategories');
    },
  },

  computed: {
    total() {
      return this.categories.reduce((a, b) => a + b.count, 0);
    },
  },
};
</script>

<style scoped>
.active {
  background: linear-gradient(91.16deg, #3d6f35 0%, #c5a811 100%);
}

.active.category {
  border-image-source: linear-gradient(to left, #c5a811, #3d6f35) !important;
  border: 5px solid;
  border-image-slice: 1;
  border-width: 3px;
  color: black;
  background: unset;
}

.active svg {
  fill: white;
}

.active svg path {
  fill: white;
}
</style>